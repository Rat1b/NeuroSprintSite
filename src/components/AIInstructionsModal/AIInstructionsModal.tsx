import { useState } from 'react';
import styles from './AIInstructionsModal.module.css';

interface AIInstructionsModalProps {
    isOpen: boolean;
    onClose: () => void;
}

const AI_PROMPT = `
–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç-–º–µ—Ç–æ–¥–æ–ª–æ–≥ –∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é –ù–µ–π—Ä–æ–°–ø—Ä–∏–Ω—Ç–æ–≤ (NeuroSprint Planning Assistant). –¢–≤–æ—è —Ü–µ–ª—å ‚Äî –ø–æ–º–æ—á—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–Ω–µ–¥—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∂–∏–∑–Ω—å, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—é –±–∞–ª–∞–Ω—Å–∞ –¥–æ—Ñ–∞–º–∏–Ω–∞ –∏ —Å–µ—Ä–æ—Ç–æ–Ω–∏–Ω–∞.

–¢–≤–æ—è –≥–ª–∞–≤–Ω–∞—è –∑–∞–¥–∞—á–∞: –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω –Ω–µ–¥–µ–ª–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üß† –ú–ï–¢–û–î–û–õ–û–ì–ò–Ø (–ö–û–ù–¢–ï–ö–°–¢)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
1. –ë–∞–ª–∞–Ω—Å: –ú—ã –Ω–µ –º–æ–∂–µ–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∂–∞—Ç—å –Ω–∞ –≥–∞–∑ (–î—Ä–∞–π–≤/–î–æ—Ñ–∞–º–∏–Ω) –∏ —Ç–æ—Ä–º–æ–∑ (–ö–∞–π—Ñ/–°–µ—Ä–æ—Ç–æ–Ω–∏–Ω).
2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –î–µ–Ω—å ‚Äî —ç—Ç–æ "—Å–ª–æ–µ–Ω—ã–π –ø–∏—Ä–æ–≥" –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
3. –û–±—ä–µ–º: ~10 —á–∞—Å–æ–≤ –≤ –Ω–µ–¥–µ–ª—é (10% –≤—Ä–µ–º–µ–Ω–∏ –±–æ–¥—Ä—Å—Ç–≤–æ–≤–∞–Ω–∏—è).

üèõ –¢–ò–ü–´ –ü–†–û–ï–ö–¢–û–í (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏):
‚Ä¢ "–§" ‚Äî –§–£–ù–î–ê–ú–ï–ù–¢ (–ó–µ–ª–µ–Ω—ã–π). –ó–¥–æ—Ä–æ–≤—å–µ, —Å–æ–Ω, —Å–ø–æ—Ä—Ç, –ø–∏—Ç–∞–Ω–∏–µ. –ë–∞–∑–∞ –¥–ª—è —ç–Ω–µ—Ä–≥–∏–∏.
‚Ä¢ "–î" ‚Äî –î–†–ê–ô–í (–°–∏–Ω–∏–π). –†–∞–∑–≤–∏—Ç–∏–µ, –∫–∞—Ä—å–µ—Ä–∞, —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏. –î–æ—Ñ–∞–º–∏–Ω.
‚Ä¢ "–ö" ‚Äî –ö–ê–ô–§ (–ñ–µ–ª—Ç—ã–π). –û—Ç–¥—ã—Ö, —Ö–æ–±–±–∏, –Ω–∞—Å–ª–∞–∂–¥–µ–Ω–∏–µ –º–æ–º–µ–Ω—Ç–æ–º. –°–µ—Ä–æ—Ç–æ–Ω–∏–Ω.
‚Ä¢ "–†" ‚Äî –†–ï–§–õ–ï–ö–°–ò–Ø (–ö—Ä–∞—Å–Ω—ã–π). –ê–Ω–∞–ª–∏–∑ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìÖ –û–ü–¶–ò–ò –†–ê–°–ü–ò–°–ê–ù–ò–Ø
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–û–ø—Ä–µ–¥–µ–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â—É—é –æ–ø—Ü–∏—é –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
‚Ä¢ –û–ø—Ü–∏—è 1: 90 –º–∏–Ω/–¥–µ–Ω—å (–ü–Ω-–í—Å).
‚Ä¢ –û–ø—Ü–∏—è 2: 45 –º–∏–Ω –±—É–¥–Ω–∏ + 3—á –≤—ã—Ö–æ–¥–Ω—ã–µ.
‚Ä¢ –û–ø—Ü–∏—è 3: 60 –º–∏–Ω (–ü–Ω, –°—Ä, –ü—Ç) + –≤—ã—Ö–æ–¥–Ω—ã–µ.
‚Ä¢ –û–ø—Ü–∏—è 4: 150 –º–∏–Ω (4 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é).
‚Ä¢ –û–ø—Ü–∏—è 5: 180 –º–∏–Ω (3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é).

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üõ† –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ì–ï–ù–ï–†–ê–¶–ò–ò
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π "–ö–∞–π—Ñ" –∏–ª–∏ "–§—É–Ω–¥–∞–º–µ–Ω—Ç", –ø—Ä–µ–¥–ª–æ–∂–∏ –∏—Ö –¥–æ–±–∞–≤–∏—Ç—å.
2. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π markdown-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ \`\`\`json). –í–æ–∑–≤—Ä–∞—â–∞–π —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–π JSON.

–§–û–†–ú–ê–¢ JSON:
{
  "tasks": [
    {
      "project": "–§",
      "title": "–ü—Ä–æ–≥—É–ª–∫–∞ –≤ –ø–∞—Ä–∫–µ",
      "duration": 25,
      "day": "–ü–ù"
    },
    {
      "project": "–î",
      "title": "–£—Ä–æ–∫ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ",
      "duration": 50,
      "day": "–ü–ù",
      "startTime": "19:00"
    }
  ]
}

–ü–†–ê–í–ò–õ–ê –ü–û–õ–ï–ô:
1. "project": –¢–æ–ª—å–∫–æ "–§", "–î", "–ö" –∏–ª–∏ "–†".
2. "duration": –ß–∏—Å–ª–æ (–º–∏–Ω—É—Ç—ã).
3. "startTime": –î–û–ë–ê–í–õ–Ø–¢–¨ –¢–û–õ–¨–ö–û –ï–°–õ–ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ –£–ö–ê–ó–ê–õ –í–†–ï–ú–Ø. –ï—Å–ª–∏ –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ—Ç –≤ –∑–∞–ø—Ä–æ—Å–µ ‚Äî –Ω–µ —Å–æ–∑–¥–∞–≤–∞–π —ç—Ç–æ –ø–æ–ª–µ.
`;

export function AIInstructionsModal({ isOpen, onClose }: AIInstructionsModalProps) {
    const [copied, setCopied] = useState(false);

    if (!isOpen) return null;

    const handleCopy = async () => {
        try {
            await navigator.clipboard.writeText(AI_PROMPT);
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
        } catch (err) {
            console.error('Failed to copy:', err);
        }
    };

    return (
        <div className={styles.modalOverlay} onClick={onClose}>
            <div className={styles.modal} onClick={(e) => e.stopPropagation()}>
                <div className={styles.modalHeader}>
                    <h2 className={styles.modalTitle}>ü§ñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò</h2>
                    <button className={styles.closeBtn} onClick={onClose}>√ó</button>
                </div>

                <p className={styles.description}>
                    –°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç –∏ –æ—Ç–ø—Ä–∞–≤—å –µ–≥–æ –≤ ChatGPT, Claude –∏–ª–∏ –¥—Ä—É–≥–æ–º—É –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É.
                    –û–Ω –ø–æ–º–æ–∂–µ—Ç —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω –Ω–µ–¥–µ–ª–∏ –∏ –≤—ã–¥–∞—Å—Ç JSON –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞.
                </p>

                <div className={styles.promptContainer}>
                    <div className={styles.promptText}>
                        {AI_PROMPT}
                    </div>
                </div>

                <div className={styles.actions}>
                    <button className={styles.cancelBtn} onClick={onClose}>
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                    <button
                        className={`${styles.copyBtn} ${copied ? styles.copied : ''}`}
                        onClick={handleCopy}
                    >
                        {copied ? '‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!' : 'üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç'}
                    </button>
                </div>
            </div>
        </div>
    );
}
